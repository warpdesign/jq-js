(function(){function buildFragment(e,t){var n=document.createElement("div"),r=0,i=0,s=null,o=document.createDocumentFragment(),u="",a=/<\s*textarea(.|\s)*?\s*\/>/g,f=/^<\s*(tbody|thead|tfoot)\/>/g,l=/^<\s*(tr|td)\/>/g;res=t.match(a),res&&res.length&&(u=res[0].replace(/\s*\/\s*>/,"></textarea>"),t=t.replace(res[0],u)),t.match(f)?n=document.createElement("table"):t.match(l)&&(n=document.createElement("tbody")),n.innerHTML=t;for(r=0,i=n.childNodes.length;r<i;r++)s=n.childNodes[0],o.appendChild(s),e.push(o.childNodes[r]);return e}function getFnIdx(e,t,n,r){var i=-1,s,o;for(o=0,s=e.length;o<s;o++)if(e[o].originalcb===t&&e[o].targetSelector===n)return o;return e.push({originalcb:t,cb:r,targetSelector:n}),e.length-1}function getDomIdx(e){var t=0,n=bindedElements.length;for(t=0;t<n;t++)if(e===bindedElements[t])return t;return bindedElements.push(e),t}function checkEventType(e,t,n){return e.match(/mouseenter/)?t.fromElement!==n&&!dom.isChildOf(t.fromElement,n):e.match(/mouseleave/)?t.toElement!==n&&!dom.isChildOf(t.toElement,n):!0}function getRealEventType(e){return e.match(/mouseenter/)?"mouseover":e.match(/mouseleave/)?"mouseout":e}function addEventToElt(e,t,n,r,i){var s=null,o=this,u="",a=null,f=-1,l=getDomIdx(n),c=r,h;handlers[l]||(handlers[l]={}),u=handlers[l],u[e]||(u[e]={defs:[],callbacks:[],namespace:[],listeners:[]}),f=getFnIdx(u[e].callbacks,r,i,c),u[e].namespace[f]||(u[e].namespace[f]=[]),u[e].defs[f]||(u[e].defs[f]=new jq.Deferred,u[e].defs[f].done(function(t,n){u[e].callbacks.forEach(function(r){u[e].namespace[f].forEach(function(){jq.each(n,function(e,n){if(r.cb.call(n,t)===!1)return t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),!1})})})}),u[e].listeners[f]=function(t){var r=!1,s=jq(t.target).parentsUntil(n,i),o;i&&i.length&&t.target.matchesSelector(i)&&s.splice(0,0,t.target),i.length===0&&checkEventType(e,t,n)?(r=!0,o=new jq(n)):checkEventType(e,t,n)&&s.length&&(r=!0,o=s),r===!0&&(u[e].defs[f].resolve(t,o),u[e].defs[f]=(new jq.Deferred).done(function(t,n){u[e].callbacks.forEach(function(r){u[e].namespace[f].forEach(function(){jq.each(n,function(e,n){if(r.cb.call(n,t)===!1)return t.stopPropagation(),t.preventDefault(),!1})})})}))},n.addEventListener(getRealEventType(e),u[e].listeners[f])),u[e].namespace[f].push({namespace:t,selector:i})}function getEvents(e){var t=e.split(/\s+/),n=t.map(function(e){var t=e.split("."),n=t.length>1?t.splice(1).join("."):defaultNS,r=t[0];return{namespace:n,eventType:r}});return n}function getData(e,t){var n=dataCacheIndex.indexOf(e),r=null;return e&&(n===-1&&(dataCacheIndex.push(e),n=dataCacheIndex.length-1,dataCache[n]={}),r=jq.extend({},e.dataset,dataCache[n])),r&&t?r[t]:r}function setData(e,t,n){var r=getData(e,typeof t=="string"?t:undefined),i=dataCacheIndex.indexOf(e);arguments.length<3&&typeof t=="object"?jq.extend(!0,dataCache[i],t):typeof t=="string"&&arguments.length>2?dataCache[i][t]=n:typeof t=="undefined"&&arguments.length<3?dataCache[i]={}:console.warn("oops - unhandled case for setData")}var extend=function extend(e,t,n){for(key in t)typeof t[key]!="undefined"&&(n&&e[key]&&typeof e[key]=="object"?extend(e[key],t[key],!0):e[key]=t[key])},inArray=function(e,t,n){n=n||0;var r=n-1;while(++r<t.length)if(t[r]===e)return r;return-1},isFunction=function(e){return typeof e=="function"},trim=function(e){return e.replace(/^\s+|\s+$/g,"")},splice=[].splice,slice=[].slice,forEach=[].forEach,isArray=function(e){return Object.prototype.toString.call(e)==="[object Array]"},previous$=window.$,previousjQuery=typeof jQuery!="undefined"?jQuery:undefined;window.$=window.jQuery=jq=function(e,t){var n="",r,i=this,s;if(isFunction(e)&&jq.holdReady)return(new jq(document)).ready(e.bind(document));if(!(this instanceof jq))return new jq(e,t);this.source=this,typeof e=="string"?(n=e=trim(e),selectors=e.split(",")):selectors=e||[],typeof t=="string"&&t.length?r=document.querySelectorAll(t):r=t||[document];if(typeof e=="string"&&e.match(/^</))return buildFragment(new jq,e);this.selector=n||"",Array.isArray(selectors)?selectors.forEach(function(e){forEach.call(r,function(t){var n="";if(e.length){if(e.match(/\:(first|last)$/))n=e.match(/\:(first|last)$/)[0],s=t.querySelectorAll(e.replace(n,"")),s.length?s=[n===":first"?s[0]:s[s.length-1]]:s=[];else try{e.match(/^>/)?s=jq(t).children(jq.trim(e.substr(1))):s=t.querySelectorAll(e)}catch(r){console.log("Unsupported selector",e),s=[]}forEach.call(s,function(e){i.indexOf(e)===-1&&i.push(e)})}})}):selectors instanceof HTMLElement||inArray(selectors,[window,document])>-1?this[this.length++]=selectors:selectors instanceof jq?(selectors.forEach(function(e){i.push(e)}),i.selector=selectors.selector):typeof selectors=="object"&&i.push(selectors)},typeof define=="function"&&define.amd&&define("jquery",[],function(){return jq}),jq.each=function(e,t){var n=0,r;if(arguments.length>2)throw"jq.each() not supported with arguments length > 1!";if(Array.isArray(e)||e instanceof jq){for(n=0,r=e.length;n<r;n++)if(t.call(e[n],n,e[n])===!1)break}else for(var n in e)if(t.call(e[n],n,e[n])===!1)break;return e},jq.prototype=new Array,jq.prototype.each=function(e){var t=this,n=0,r=this.length,i=!1,s=null;for(n=0;n<r;n++){s=this[n],i=e.call(s,n,s);if(i===!1)break}return this},jq.extend=function(){var e=null,t=!1,n={};return e=slice.call(arguments,0).filter(function(e){return e}),e[0]===!0?(e=e.slice(2),n=arguments[1],t=!0):(n=e[0],e=e.slice(1)),n=n||{},e.forEach(function(e){extend(n,e,t)}),n},jq.noConflict=function(e){return window.$=previous$,e===!0&&(window.jQuery=previousjQuery),jq},jq.globalEval=function(str){str&&eval.call(window,str)},jq.now=function(){return(new Date).getTime()},jq.prototype.pushStack=function(e){var t=new jq;return jq.isArray(e)&&e.forEach(function(e){t.push(e)}),t},jq.fn=jq.prototype,jq.fn.extend=function(e){return jq.extend(jq.fn,e)},jq.expr={":":{}},jq.modules={},jq.fn.jquery="1.8.0 - jq version 0.1.0",jq.fn.jq={version:"0.1.0",modules:"event,data"};var dom=function(){return function(e){this.Element&&function(e){e.matchesSelector=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector||function(e){var t=this,n=(t.parentNode||t.document).querySelectorAll(e),r=-1;while(n[++r]&&n[r]!=t);return!!n[r]}}(Element.prototype)}(window),{isAttached:function(e){var t=!1;while(e&&!t)t=e.tagName==="HTML",e=e.parentElement;return t},isChildOf:function(e,t){var n=e&&e.parentElement||null;while(n){if(t===n)return!0;n=n.parentElement}return!1}}}(),deferred=function(){function r(i){var s="pending",o=[[],[],[]],u=[],a=!1,f=null,l=null,c={promise:function(e){if(e==null)return c;for(var t in c)e[t]=c[t];return e}},h={state:function(){return s},pipe:function(){var t=new r,n=this,i=arguments;return[["resolve","done"],["reject","fail"],["notify","progress"]].forEach(function(r,s){n[r[1]](function(){var n=e.apply(arguments),o=null;i[s]&&(o=i[s].apply(f||t,n),function(n,i){n&&isFunction(n.fail)&&isFunction(n.done)?(n.done(function(){t.resolve.apply(i,e.apply(arguments))}),n.fail(function(){t.reject.apply(i,e.apply(arguments))})):t[r[0]].apply(i,[n])}(o,f||t))})}),t.promise()}};return h.then=h.pipe,[["resolve","resolved","done"],["reject","rejected","fail"],["notify","pending","progress"],[null,null,"always"]].forEach(function(r,i){r[0]&&(h[r[0]]=function(){return u=e.apply(arguments),s==="pending"&&(s=r[1],a=!0,o[i].forEach(function(e){n(e,u,deferred)})),this},h[r[0]+"With"]=function(){return u=e.call(arguments,1),s==="pending"&&(s=r[1],a=!0,o[i].forEach(function(e){n(e,u,arguments[0])})),this}),c[r[2]]=function(){var e=this;return t(arguments).forEach(function(t){s!=="pending"&&(!r[0]||s===r[1])&&t.apply(f||e,u),r[0]?o[i].push(t.bind(f||e)):(o[0].push(t.bind(f||e)),o[1].push(t.bind(f||e)))}),this}}),c.isResolved=function(){return s==="resolved"},c.isRejected=function(){return s==="rejected"},l=c.promise(h),i&&i.apply(l,[l]),l}var e=Array.prototype.slice,t=function(t){return typeof t=="object"?e.apply(t):t},n=function(e,t,n){e.apply(n,t)};return r.when=function(){if(arguments.length<2){var e=arguments.length?arguments[0]:undefined;return e&&typeof e.isResolved=="function"&&typeof e.isRejected=="function"?e.promise():r().resolveWith(window,[e]).promise()}return function(e){var t=r(),n=e.length,i=0,s=new Array(n),o=new Array(n),u=[];for(var a=0;a<e.length;a++)u[a]=e[a]&&e[a].promise?e[a].promise():undefined,function(a){var f=null;e[a].done||(f=e[a],e[a]=new r),e[a].done(function(){s[a]=arguments.length<2?arguments[0]:arguments,++i==n&&t.resolve.apply(u,s)}).fail(function(){t.reject.apply(u,arguments)}),e[a].progress(function(){o[a]=arguments.length<2?arguments[0]:arguments,t.notify.apply(u,o)}),f&&e[a].resolve(f)}(a);return t.promise()}(arguments)},r}();jq.prototype.filter=function(e){var t=new jq,n=0;return typeof e=="string"?this.forEach(function(n){n.matchesSelector(e)&&t.push(n)}):typeof e=="function"?this.forEach(function(r){e.call(r,n)===!0&&t.push(r),n++}):e instanceof HTMLElement?this.forEach(function(n){n===e&&t.push(n)}):e instanceof jq&&this.forEach(function(n){e.indexOf(n)&&t.push(n)}),t},jq.prototype.get=function(e){return typeof e=="undefined"?jq.map(this,function(e){return e}):(e<0&&(e=this.length+e),this[e])},jq.prototype.eq=function(e){var t=new jq;return e<0&&(e=this.length+e),e>-1&&e<=this.length-1&&(t.push(this[e]),t.selector=this.selector),t},jq.prototype.first=function(){var e=new jq;return this.length&&e.push(this[0]),e.source=this,e},jq.prototype.not=function(){var e=new jq,t,n,r;if(arguments.length)switch(typeof arguments[0]){case"string":t=arguments[0],this.each(function(n,r){!r.matchesSelector(t)&&e.indexOf(r)===-1&&e.push(r)});break;case"object":arguments[0]instanceof jq?(n=arguments[0],this.each(function(t,r){n.indexOf(r)===-1&&e.indexOf(r)===-1&&e.push(r)})):arguments[0]instanceof HTMLElement&&(n=arguments[0],this.each(function(t,r){r!==n&&e.indexOf(r)===-1&&e.push(r)}));break;case"function":r=arguments[0],this.each(function(t,n){r.call(n,t)!==!0&&e.indexOf(n)===-1&&e.push(n)})}return e},jq.prototype.last=function(){var e=new jq;return this.length&&e.push(this[this.length-1]),e.source=this,e},jq.prototype.is=function(e){var t=!1,n=null;return!!e&&e.match&&this.each(function(r,i){var s=e.match(/:\s*(visible|hidden)\s*$/),o;if(s){o=dom.isAttached(i)&&i.style&&i.style.display!=="none";if(o){n=i.parentElement;while(n){if(!dom.isAttached(i)||!i.style||i.style.display==="none"){o=!1;break}n=n.parentElement}}t=s[1]==="visible"?o:!o}else i.matchesSelector(e)&&(t=!0);if(t)return!1}),t},jq.prototype.index=function(){var e=this[0],t=arguments[0],n=this[0].parentElement.children,r=0,i,s=-1;if(!arguments.length){for(r=0,i=n.length;r<i;r++)if(e===n[r]){s=r;break}}else if(t instanceof HTMLElement||t instanceof jq){var o=t instanceof HTMLElement?t:t[0];this.each(function(e){if(this===o)return s=e,!1})}else{var o=this[0];o&&jq(t).each(function(e){if(this===o)return s=e,!1})}return s},jq.prototype.find=function(e){var t=new jq(e,this);return t.source=this,t},jq.prototype.end=function(){return this.source===this?new jq:this.source},jq.prototype.parent=function(e){var t=new jq;return this.forEach(function(n){n.parentNode&&t.indexOf(n.parentNode)===-1?(!e||n.parentNode.matchesSelector(e))&&t.push(n.parentNode):(n===document.body.parentNode&&!e||n.parentNode.matchesSelector(e))&&t.push(document)}),t.source=this,t},jq.prototype.parents=function(e){var t=new jq,n=this.length-1,r=null,i=0;for(;n>=0;n--){r=this[n].parentElement;while(r){if(!e||r.matchesSelector(e))i=t.indexOf(r),i!==-1?(t.splice(i,1),t.push(r)):t.push(r);r=r.parentElement}}return t.source=this,t},jq.prototype.parentsUntil=function(e,t){var n=new jq,r=this.length-1,i=null,s=0;for(;r>=0;r--){i=this[r].parentElement;while(i){if(!!e&&(typeof e=="string"&&!!i.matchesSelector(e)||i===e))break;s=n.indexOf(i),s!==-1?(n.splice(s,1),n.push(i)):n.push(i),i=i.parentElement}}return n.source=this,t?n.filter(t):n},jq.prototype.children=function(e){var t=new jq;return this.forEach(function(n){var r=0,i=n.childNodes.length;for(;r<i;r++)n.childNodes[r].nodeType===1&&(!e||n.childNodes[r].matchesSelector(e))&&t.push(n.childNodes[r])}),t.source=this,t},jq.prototype.nextAll=function(e){var t=new jq;return t.source=this,this.each(function(n,r){var i=r.nextElementSibling;while(i)(!e||i.matchesSelector(e))&&t.push(i),i=i.nextElementSibling}),t},jq.prototype.contents=function(){var e=new jq;return this.forEach(function(t){var n=0,r=t.childNodes.length;for(;n<r;n++)e.push(t.childNodes[n]);(t instanceof HTMLFrameElement||t instanceof HTMLIFrameElement)&&e.push(t.ownerDocument)}),e.source=this,e};var eventShortcuts=["blur","dblclick","change","click","error","focus","focusin","focusout","keydown","keypress","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","resize","scroll","select","submit","unload"],handlers={},bindedElements=[],defaultNS="default";jq.prototype.on=function(e){if(typeof e=="object")for(var t in e){var n=getEvents(t),r=e[t],i="";this.forEach(function(e){n.forEach(function(t){addEventToElt.call(this,t.eventType,t.namespace,e,r,i)})})}else try{var n=getEvents(e),r=arguments[arguments.length-1],i=arguments[1]&&typeof arguments[1]=="string"?arguments[1]:"";this.forEach(function(e){n.forEach(function(t){addEventToElt.call(this,t.eventType,t.namespace,e,r,i)})})}catch(s){console.log("error registering event using on",s,n,this)}return this},jq.prototype.bind=function(e,t){return this.on(e,null,t)},jq.prototype.off=function(e){var t=slice.call(arguments,arguments.length-1)[0],n=arguments.length>0&&typeof arguments[1]=="string"&&arguments[1]||null,r,i;return arguments.length?(i=getEvents(e),r=typeof t=="function"&&t||null,console.log("1"),console.log("eventHandler",r),console.log("selector",n),this.forEach(function(e){var t=getDomIdx(e);console.log("2"),console.log("eventHandler",r),console.log("selector",n),console.log("checking element",e);var s=handlers[t];if(!s)return;console.log("checking eventList"),i.forEach(function(e){console.log("3"),console.log("eventHandler",r),console.log("selector",n),console.log(e.namespace);var t=s[e.eventType],i=0,o=t.namespace[i];if(!t)return;console.log("need to test for listeners",t),console.log("*** avant",o.length),t.callbacks.forEach(function(s){var u=[],a=0,f=0;console.log("4"),console.log("eventHandler",r),console.log("selector",n),console.log(r,t,o),(!r||r===s.originalcb)&&o.forEach(function(t,r,i){(!n||n===t.selector)&&(e.namespace===defaultNS||e.namespace===t.namespace)&&(console.log("need to remove !"),delete i[r],u.push(r))});for(a=0;a<u.length;a++)t.namespace[i].splice(u[a]-f,1),f++}),console.log("*** apres",t.namespace[i].length,t.namespace[i]),i++})})):this.forEach(function(e){var t=getDomIdx(e);for(var n in handlers[t])e.removeEventListener(n,handlers[t][n].listener,!1);handlers[t]={}}),this},jq.prototype.trigger=function(e){var t=typeof e=="string"?getEvents(e):[{eventType:e.type,namespace:"default"}],n=this;return jq.each(t,function(){var e=document.createEvent("HTMLEvents");e.initEvent(this.eventType,!0,!0),console.log("need to send",this.eventType),n.each(function(){this.dispatchEvent(e)})}),this},jq.prototype.triggerHandler=function(){var e=typeof events=="string"?getEvents(events):[{eventType:events.type,namespace:"default"}],t=this,n=this[0],r=undefined;return jq.each(e,function(){var e=document.createEvent("HTMLEvents");e.initEvent(this.eventType,!1,!1),console.log("need to send",this.eventType);var n=t[0];n&&(r=n.dispatchEvent(e))}),r},jq.prototype.delegate=function(){var e=arguments[1],t=arguments[0];return this.on.apply(this,[e,t].concat(slice.call(arguments,2)))},jq.prototype.live=function(){console.warn("jq.live - doesn't work")},eventShortcuts.forEach(function(e){jq.prototype[e]=function(){return arguments.length?this.on.apply(this,[e].concat(slice.call(arguments,0))):(console.log("simulating event",e),this.trigger(e)),this}}),jq.prototype.mouseenter=function(e){return this.on("mouseenter",null,e)},jq.prototype.mouseleave=function(e){return this.on("mouseleave",null,e)},jq.prototype.hover=function(e,t){return this.mouseenter(e).mouseleave(t)},jq.Event=function(e){var t;console.log("creating event",e,arguments),this instanceof jq.Event||(t=new jq.Event(e)),this.isDefaultPrevented=function(){return!1}},jq.event={global:{}};var cache=function(){var e=[],t=[];return{getCachedElements:function(){return e},getAllCache:function(){return t},getCache:function(n){var r=e.indexOf(n);return r>-1?t[r]:undefined},delCache:function(n){var r=e.indexOf(n);r>-1&&(t[r]={})},getCacheProperty:function(e,t){var n=this.getCache(e);return n&&typeof n[t]!="undefined"?n[t]:undefined},setCacheProperty:function(n,r,i){var s=e.indexOf(n),o;s===-1?(s=e.length,o={},o[r]=i,t.push(o),e.push(n)):t[s][r]=i}}}(),dataCache=[],dataCacheIndex=[];jq.prototype.data=function(e,t){var n=arguments;return!arguments.length||arguments.length===1&&(typeof e).match(/string|undefined/)?getData(this[0],e):this.each(function(r,i){n.length>1&&typeof t!="undefined"?setData(i,e,t):setData(i,e)})},jq.prototype.hasData=function(e){return dataCacheIndex.indexOf(e)!==-1},jq.prototype.removeData=function(e){var t;return arguments.length?(typeof e).match(/string|object/)?(t=!jq.isArray(e)&&e.split(/\s+/)||e,this.each(function(e,n){jq.each(t,function(e,t){setData(n,t,undefined)})})):this:this.each(function(e,t){setData(t,undefined)})},jq.data=function(e){return jq.prototype.data.apply(jq(e),slice.call(arguments,1))},jq._data=function(e,t){return e instanceof jq&&(e=e[0]),cache.getCacheProperty(e,t)},jq._removeData=function(e){cache.delCache(e)}})();